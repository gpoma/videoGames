{% autoescape %}
var pathGame = "{{ '/bundles/videogame/video/'~game.videoPath~'/' | raw }}";
{% endautoescape %}

{{ include('Engine/gamelib.js.twig') }}

var game_json = {{ include('Games/'~game.shortName~'.json', { 'game': game }) }};
var debug = false;
var debug_script   = false;
var hascookie = game_json.cookie;
var cookieKey = "{{ game.name }}";
var cookieValue = "{{ game.shortName }}";

if(hascookie){
  createCookieOrBackToMenu(cookieKey,cookieValue);
}

var mobile = false;
var debug = false;
var debug_script   = false;
var game_json = {{ include('Games/'~game.shortName~'.json', { 'game': game }) }};
var gamekeys = game_json.gamekeys;

var anchor = window.location.hash;
var anchorValue = anchor.substring(anchor.indexOf("#")+1);

var firstVideoNumber = game_json.debugstart ;

if(anchorValue){
  debug = true;
  firstVideoNumber = anchorValue;
}

video = document.getElementById( 'video_'+ firstVideoNumber );
var lastVideoPlayed = { "val" : game_json.debugstart };

if(debug){
  video.onloadedmetadata = function() {
    video.currentTime = ""+video.duration - 0.1;
  };
}

var lastVideoPlayed = { "val" : game_json.debugstart };

{% if urlgame %}
 {{ include('Games/gameUrlInitialization.js.twig', { 'game': game , 'urlgame' : urlgame }) }}
{% endif %}
 {{ include('Games/gameEventsManager.js.twig', { 'game': game , 'urlgame' : urlgame }) }}
if(video){
 video.onloadeddata = function() {
    $("#divLoading").hide();
    {% if not urlgame %}
        {{ "video.play();" }}
    {% endif %}
 };
}else{
    $("#divLoading").hide();
}
